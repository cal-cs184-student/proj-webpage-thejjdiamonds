<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, shrink-to-fit=no">
<link href="assets/images/diamond.png" rel="icon" />
<title>Project 2</title>
<meta name="description" content="184 Project 1 Writeup">
<meta name="author" content="harnishdesign.net">

<!-- Stylesheet
============================== -->
<!-- Bootstrap -->
<link rel="stylesheet" type="text/css" href="assets/vendor/bootstrap/css/bootstrap.min.css" />
<!-- Font Awesome Icon -->
<link rel="stylesheet" type="text/css" href="assets/vendor/font-awesome/css/all.min.css" />
<!-- Magnific Popup -->
<link rel="stylesheet" type="text/css" href="assets/vendor/magnific-popup/magnific-popup.min.css" />
<!-- Highlight Syntax -->
<link rel="stylesheet" type="text/css" href="assets/vendor/highlight.js/styles/github.css" />
<!-- Custom Stylesheet -->
<link rel="stylesheet" type="text/css" href="assets/css/stylesheet.css" />
</head>

<body data-spy="scroll" data-target=".idocs-navigation" data-offset="125">

<!-- Preloader -->
<div class="preloader">
  <div class="lds-ellipsis">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
  </div>
</div>
<!-- Preloader End --> 

<!-- Document Wrapper   
=============================== -->
<div id="main-wrapper"> 
  
  <!-- Header
  ============================ -->
  <header id="header" class="sticky-top"> 
    <!-- Navbar -->
    <nav class="primary-menu navbar navbar-expand-lg navbar-dropdown-dark">
      <div class="container-fluid">
        <!-- Sidebar Toggler -->
		<button id="sidebarCollapse" class="navbar-toggler d-block d-md-none" type="button"><span></span><span class="w-75"></span><span class="w-50"></span></button>
		
		<!-- Logo --> 
        <!-- <a class="logo ml-md-3" href="index.html" title="iDocs Template"> <img src="assets/images/logo.png" alt="iDocs Template"/> </a>  -->
		<span class="text-2 ml-2">Jasmine Lin and Jennifer Prince</span> 
        <!-- Logo End -->
    </nav>
    <!-- Navbar End --> 
  </header>
  <!-- Header End --> 
  
  <!-- Content
  ============================ -->
  <div id="content" role="main">
    
	<!-- Sidebar Navigation
	============================ -->
	<div class="idocs-navigation bg-light">
      <ul class="nav flex-column ">
      	<li class="nav-item"><a class="nav-link" href="#overview_header">Project 3-2: Pathtracer 2</a>
          <ul class="nav flex-column">
						<li class="nav-item"><a class="nav-link" href="#overview_content">Overview</a></li>
						<li class="nav-item"><a class="nav-link" href="#task1">Part 1: Mirror and Glass Materials</a></li>
						<li class="nav-item"><a class="nav-link" href="#task4">Part 4: Depth of Field</a></li>
          </ul>
        </li>
        <li class="nav-item"><a class="nav-link" href="#website_link">Website Link</a>
        </li>
      </ul>
  </div>		
        
		<!-- <hr class="divider"> -->
		<!-- Docs Content
	============================ -->
    <div class="idocs-content">
      <div class="container"> 		
        
		<hr class="divider">

		<!-- Project 2 Header
		============================ -->
        <section id="overview_header">
          <h1>Project 3-2: Pathtracer 2</h1>
		  <div class="row">
			<div class="column">
			  <img src="images/Task1/glass_spheres_100.png" width="500px" style="margin: 5px 5px 5px 5px;">
			</div>
			<!--Insert Image from Part 4 here.-->
			<div class="column">
			  <img src="images/Task1/glass_spheres_1.png" width="500px" style="margin: 5px 5px 5px 5px;">
			</div>
		  </div>

          <!-- <div id="centerImage">
          	<p><img src="images/Task1/glass_spheres_100.png" alt="glass_and_mirror_spheres" width="500px" align="middle"/></p>
        	</div> -->
        </section>
		
		<!-- Overview
		============================ -->
        <section id="overview_content">
          <h2>Overview</h2>
          <p class="lead mb-5">INSERT ENTIRE OVERVIEW</p>
        </section>

    <hr class="divider">

    <!-- Section 1 Header
		============================ -->
       <!--  <section id="section1_header">
          <h1>Section I: Bezier Curves and Surfaces</h1>
        </section> -->

        <!-- Task 1 Content
		============================ -->
        <section id="task1">
          <h2>Part 1: Mirror and Glass Materials</h2>
		  <p> 
			For this portion of the project, we rendered mirror and glass materials. For our mirror material, we implemented two functions: <code>reflect</code> and <code>MirrorBSDF::sample_f</code>: 
		  <ul>
			<li><code>reflect</code>: Given an incoming ray/vector, we reflected it about the normal (0, 0, 1) and stored the result in the variable <code>wi</code>.</li>
			<li><code>MirrorBSDF::sample_f</code>: Relying on our <code>reflect</code> implementation, we first reflected the incoming ray/vector and then found the resulting vector’s angle with the normal (with<code>abs_cos_theta</code>). We then returned the reflectance divided by the angle.</li>
		  </ul>
		  For our glass material, we implemented three functions to help us render: <code>refract</code>, <code>RefractionBSDF::sample_f</code> and <code>GlassBSDF::sample_f</code>: 
		  <ul>
			<li><code>refract</code>: For refraction, we wanted to first determine if the incoming ray was entering the non-air material, or exiting. If it was entering, the index of refraction would <code>1/ior</code>; if it was exiting, then it would just be the variable <code>ior</code>. From there, we would determine if there was total internal reflection, based on if <code>1 - η2(1 - cos2θ) < 0</code>. 
				If there was total internal reflection, we would return false. Otherwise, we would appropriately assign the refraction to<code>wi</code> and return true (where refraction did occur).</li>
			<li><code>MirrorBSDF::sample_f</code>:Relying on our <code>refract</code> implementation, we first determined if there was refraction. If there was, then we would calculate the resulting vector’s angle with the normal (using <code>abs_cos_theta</code>) and return the transmittance divided by the angle and <code>pow(eta, 2)</code> (or the index of refraction squared). </li>
			<li><code>GlassBSDF::sample_f</code>: For sampling glass, when refraction does occur, both reflection and refraction occur at this point, so we wanted to model this by determining if we should reflect or refract based on Schlick’s reflection coefficient. If there was total internal reflection, then we would reflect normally. Otherwise, we would determine if we wanted to reflect or refract using Shclick’s 
				reflection coefficient (and using the function <code>coin_flip</code>). If we reflected, then we would multiply Schlick's coefficient with the reflectance divided by the cosine term; otherwise, we would multiply the transmittance divided by the cosine term and <code>eta</code> with 1 - Schlick’s reflection coefficient. 
			</li>
		  </ul>
		  </p>

		  <p>Below we rendered a sequence of images of the scene CBspheres.dae, each rendered with 1024 samples per pixel, 4 samples per light, and different max_ray_depth (0, 1, 2, 3, 4, 5, 100):			
		</p>
			  <div class="row">
				<div class="column">
				  <img src="images/Task1/glass_spheres_0.png" width="480px" style="margin: 5px 5px 5px 5px;">
				  <figcaption>../dae/sky/CBspheres.dae at max ray depth 0</figcaption>
				</div>
				<div class="column">
				  <img src="images/Task1/glass_spheres_1.png" width="480px" style="margin: 5px 5px 5px 5px;">
				  <figcaption>../dae/sky/CBspheres.dae at max ray depth 1</figcaption>
				</div>
			  </div>
			  <p> Starting at max ray depth of 0, no light bounces are done before the light enters the camera - this is shown by the fact that we don’t see any of the spheres in the image and the only thing that renders in the image is the light source coming from the ceiling. At max ray depth of 1, we start to see spheres forming and the room light up, but the spheres are still mostly black. 
				At this point, the spheres are now reflective, so after once bounce, we observe that only the ceiling light is reflected on the surface of the spheres (since there would only be one bounce when the light hits the surface of the sphere and then enters the camera). 
			 </p>
			  <div class="row">
				<div class="column">
				  <img src="images/Task1/glass_spheres_2.png" width="480px" style="margin: 5px 5px 5px 5px;">
				  <figcaption>../dae/sky/CBspheres.dae at max ray depth 2</figcaption>
				</div>
				<div class="column">
				  <img src="images/Task1/glass_spheres_3.png" width="480px" style="margin: 5px 5px 5px 5px;">
				  <figcaption>../dae/sky/CBspheres.dae at max ray depth 3</figcaption>
				</div>
			  </div>
			  <p> When we increase it to 2 for the max ray depth, we note that the surface of the spheres become more “clear”, such that the reflection on the left sphere becomes more apparent and we start to also see more on the right sphere. However, we still don’t have enough bounces, or more specifically, the glass material is still slightly dark since we need one more additional bounce of 
				light (the refracted light is still within the sphere). At max ray depth of 3 though, we start to see the highlight under the sphere. This results from the light going to the surface of the sphere at top, then going towards the surface at the bottom, then the floor and then entering the camera (i.e. the light hits 3 different surfaces/points before entering the camera). This results 
				in the glass material being able to more “fully refract.” However, the sphere reflected in the left sphere is still slightly dark. 
			</p>
			  <div class="row">
				<div class="column">
				  <img src="images/Task1/glass_spheres_4.png" width="480px" style="margin: 5px 5px 5px 5px;">
				  <figcaption>../dae/sky/CBspheres.dae at max ray depth 4</figcaption>
				</div>
				<div class="column">
				  <img src="images/Task1/glass_spheres_5.png" width="480px" style="margin: 5px 5px 5px 5px;">
				  <figcaption>../dae/sky/CBspheres.dae at max ray depth 5</figcaption>
				</div>
			  </div>
			  <p>Between max ray depths of 4 and 5, we don’t see any huge noticeable change between the two, but we do notice that the right sphere has refracted some light to the wall. At 4 and 5, the light ends up bouncing the same way that it did with max ray depth of 3, but hitting some additional surfaces, leading to the light being refracted onto the wall. In addition, the reflection of the sphere 
				in the left sphere appears to be brighter. 
			</p>

				<div class="column centerImage">
				  <img src="images/Task1/glass_spheres_100.png" width="480px" style="margin: 5px 5px 5px 5px;">
				  <figcaption>../dae/sky/CBspheres.dae at max ray depth 100</figcaption>
				</div>
			  <p>With 100, there isn’t a large difference between the image that was rendered at max ray depth of 5 (in a sense, our rays have “converged” so there aren't any new changes for the image rendered). </p>
        </section>

       <hr class="divider">

        <!-- Task 4 Content
		============================ -->
        <section id="task4">
          <h2>Part 4: Depth of Field</h2>
          <p>REPLACE PART 4 CONTENT HERE</p>
		<p>
			To show what it looks like, we rendered two images as shown below using our implementation of global illumination: 
		</p>

		<div class="row">
			<div class="column">
			  <img src="images/bunny_global.png" width="480px" style="margin: 5px 5px 5px 5px;">
			  <figcaption> CBbunny.dae with Global Illumination </figcaption>
			</div>
			<div class="column">
			  <img src="images/dragon_global.png" width="480px" style="margin: 5px 5px 5px 5px;">
			  <figcaption> dragon.dae with Global Illumination </figcaption>
			</div>
		  </div>

		  <p>
			To see what direct and indirect lighting look like, we rendered CBbunny.dae with both types of lighting. 
		  </p>

		  <div class="row">
			<div class="column">
			  <img src="images/bunny_direct.png" width="480px" style="margin: 5px 5px 5px 5px;">
			  <figcaption> CBbunny.dae with Direct Lighting </figcaption>
			</div>
			<div class="column">
			  <img src="images/bunny_indirect.png" width="480px" style="margin: 5px 5px 5px 5px;">
			  <figcaption> CBbunny.dae with Indirect Lighting </figcaption>
			</div>
		  </div>

		  <p>Between the two, rendering with direct lighting creates a harsher contrast with lighting - more specifically, the shadows are more harsh and more apparent on the bunny's body. In addition, the ceiling is mostly dark, with only the ceiling lighting lit up. 
			In comparison, indirect lighting creates a softer look, where the shadows aren't as apparent and the ceiling is completely lit up (the shadows are much less distinguishable than they are with just direct lighting). If comparing both images though with the one 
			above it, specifically with global illumination, both images are "darker" or "dimmer" than their global illumination counterpart. 
		  </p>

		  <p>
			We then rendered some sceens with varying levels of max ray depth. 
		  </p>
			<div class="row">
				<div class="column">
				<img src="images/task4_max_ray_depth/bunny_ray_0.png" width="480px" style="margin: 5px 5px 5px 5px;">
				<figcaption> Max Ray Depth of 0 </figcaption>
				</div>
				<div class="column">
				<img src="images/task4_max_ray_depth/bunny_ray_1.png" width="480px" style="margin: 5px 5px 5px 5px;">
				<figcaption> Max Ray Depth of 1</figcaption>
				</div>
			</div>
			<div class="row">
				<div class="column">
				<img src="images/task4_max_ray_depth/bunny_ray_2.png" width="480px" style="margin: 5px 5px 5px 5px;">
				<figcaption> Max Ray Depth of 2 </figcaption>
				</div>
				<div class="column">
				<img src="images/task4_max_ray_depth/bunny_ray_3.png" width="480px" style="margin: 5px 5px 5px 5px;">
				<figcaption> Max Ray Depth of 3 </figcaption>
				</div>
			</div>
			<div class="row">
				<div class="column">
				<img src="images/task4_max_ray_depth/bunny_ray_depth100.png" width="480px" style="margin: 5px 5px 5px 5px;">
				<figcaption> Max Ray Depth of 100 </figcaption>
				</div>
			</div>
			<p>
				Comparing the CBbunny.dae renders at different settings of max ray depth, the most noticeable difference comes from the jump between 1 and 2. At max ray depth of 0, it is only a black screen with the light on top; at max ray depth of 1, the bunny starts to show up 
				but it is still relatively dark, with some harsh shadows on the bottom portion of the bunny and with the ceiling still mostly dark with the exception of the ceiling light. At max ray depth of 2, the ceiling is completely lit up and the bunny's shadow becomes softer. 
				As we increase the max ray depth, the changes becomes less discernable, and it doesn't appear that the image changes too much in regards to lighting and shadows. 
			</p>
			
          <p>Now, below are the scenes rendered with various sample-per-pixel rates (using 4 light rays):</p>
          <div class="row">
					<div class="column">
					  <img src="images/bunny_1.png" width="480px" style="margin: 5px 5px 5px 5px;">
					  <figcaption>1 sample per pixel</figcaption>
					</div>
					<div class="column">
					  <img src="images/bunny_2.png" width="480px" style="margin: 5px 5px 5px 5px;">
					  <figcaption>2 samples per pixel</figcaption>
					</div>
				  </div>
				  <div class="row">
					<div class="column">
					  <img src="images/bunny_4.png" width="480px" style="margin: 5px 5px 5px 5px;">
					  <figcaption>4 samples per pixel</figcaption>
					</div>
					<div class="column">
					  <img src="images/bunny_8.png" width="480px" style="margin: 5px 5px 5px 5px;">
					  <figcaption>8 samples per pixel</figcaption>
					</div>
				  </div>
				  <div class="row">
					<div class="column">
					  <img src="images/bunny_16.png" width="480px" style="margin: 5px 5px 5px 5px;">
					  <figcaption>16 samples per pixel</figcaption>
					</div>
					<div class="column">
					  <img src="images/bunny_32.png" width="480px" style="margin: 5px 5px 5px 5px;">
					  <figcaption>32 samples per pixel</figcaption>
					</div>
				  </div>
				  <div class="row">
					<div class="column">
					  <img src="images/bunny_64.png" width="480px" style="margin: 5px 5px 5px 5px;">
					  <figcaption>64 samples per pixel</figcaption>
					</div>
					<div class="column">
					  <img src="images/bunny_1024.png" width="480px" style="margin: 5px 5px 5px 5px;">
					  <figcaption>1024 samples per pixel</figcaption>
					</div>
				  </div>

        <hr class="divider">

    <!-- Website Link -->
        <section id="website_link">
        	<p>Here is the link to this website: <a href="https://cal-cs184-student.github.io/proj-webpage-thejjdiamonds/proj3-2/index.html" > link</a></p>
        	<p><a href="https://cal-cs184-student.github.io/proj-webpage-thejjdiamonds/proj3-2/index.html">https://cal-cs184-student.github.io/proj-webpage-thejjdiamonds/proj3-2/index.html</a></p>
        </section>
		  
  
</div>
<!-- Document Wrapper end --> 

<!-- Back To Top --> 
<a id="back-to-top" data-toggle="tooltip" title="Back to Top" href="javascript:void(0)"><i class="fa fa-chevron-up"></i></a> 

<!-- JavaScript
============================ -->
<script src="assets/vendor/jquery/jquery.min.js"></script> 
<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script> 
<!-- Highlight JS -->
<script src="assets/vendor/highlight.js/highlight.min.js"></script> 
<!-- Easing --> 
<script src="assets/vendor/jquery.easing/jquery.easing.min.js"></script> 
<!-- Magnific Popup --> 
<script src="assets/vendor/magnific-popup/jquery.magnific-popup.min.js"></script> 
<!-- Custom Script -->
<script src="assets/js/theme.js"></script>
</body>
</html>
